#importando bibliotecas
import pandas as pd
import plotly.graph_objects as go

#dataframe

df = pd.read_csv('https://raw.githubusercontent.com/Beatrizvn/Codigo/main/numerodemortes.csv') 

#transformando o dataframe em listas array, guardar informações de modo ordenado

dados_array = df.values

Pais = []
Codigo_ISO = []
Ano = []
Mortes = []
Texto = [] #criando uma lista vazia


for linha in dados_array:
    if linha[2] == 2017: #selecionando o ano que sera utilizado
        Pais.append(linha[0])
        Codigo_ISO.append(linha[1])
        Ano.append(linha[2])
        Mortes.append(linha[3])
        Texto.append(f'{linha[0]} - Mortes : {int(linha[3])}') #texto que vai aparecer ao passar o mouse por cima das bolhas


#Gerando o gráfico

figura = go.Figure((go.Scattergeo(
            locationmode = 'ISO-3', #para achar o local de cada pais no mapa
            locations = Codigo_ISO, #achar o local de cada pais no mapa
            text = Texto, #o texto a ser mostrado ao passar o mouse
            marker = dict( 
                size = Mortes,#tamanho das bolinhas
                sizemode = 'area', #Define a regra para a qual os dados são convertidos em pixels. Evita que as bolhas fiquem enormes
                color = Mortes, #O que vai levar em conta para definir a escala de cor
                colorscale = 'Rainbow', #A cor da barra
                cmax = max(Mortes, key=int), #O valor maximo da barra de cor
                cmin = 0, #O valor minimo da barra de cor
                colorbar_title = "Mortes"))

                ))

#Mudando layout

figura.update_layout(
        title_text = 'O número anual de mortes atribuídas ao tabagismo por 100.000 pessoas em 2017', #titulo do grafico 

)

figura.show()
